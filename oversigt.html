<!-- Tilføj projekt og gantt diagram -->
<script type="text/javascript">
   $(function(){
        $("#addproj").click(function(){ // adds a new line of parameter 
            var rows = $('table >tbody >tr').length;
            $("tbody").append('<tr><th class="input-group"><span class="input-group-addon">'+
            '<i class="glyphicon glyphicon-pencil"></i></span><input id="subname'+rows+
            '" type="text" class="form-control" placeholder="Navn på Delopgave"/></th><th><span class="input-group">'+
            '<span class="input-group-addon"><i class="glyphicon glyphicon-time">'+
            '</i></span><input id="subtime'+rows+'" type="number" class="form-control"'+
            ' placeholder="Timer det tag"/></span></th></tr>');
        });
    
        $("#save").click(function(){ // saves the project in the database under its name
            var rows = $('table >tbody >tr').length;
            var temp = $('#name').val();
            
            if(temp != [] ){  
            var subNames = [],subTimes = [], irlTimes = [];
            for (i = 0; i < rows; i++){
                subNames[i] = $("#subname"+i).val();
                subTimes[i] = $("#subtime"+i).val();
                irlTimes[i] = 0;
                if(($("#subtime"+(i+1)).val() && $("#subname"+(i+1)).val()) == ""){
                break;
                }
            }
            data = {
                    subNames,
                    subTimes,
                    irlTimes
                    };
    
            firebase.database().ref('projekter/' + temp).set(data,function(error){
                if(error) {
                console.log('write to database failed!');
                } else {
                console.log('data saved successfully!');
                };
            });
            }else{alert('Du skal som minimum udfylde Projektnavn')};             
        });  
    });
</script>
<div class="w3-container 3" style="font-family:courier; background-color:#ff6000db">
    <h1 style="font-family:Courier New;"> Oversigt</h1>
</div>
<div class="w3-container">
    <h2>Projekt</h2>
    <p>Tilføj projektnavn med delprojekter og estimeret tid forneden</p>
</div>

<div class="w3-container" >
        <table class="table">
          <thead>
            <tr>
              <th class="input-group">
                <span class="input-group-addon">Projektnavn</span>
                <input type="text" id="name" class="form-control"/>
              </th>
              <th>
                <input type="date" id="date" class="form-control" />
              </th>
              <th>
                  <input type="date" id="date" class="form-control"  />
              </th>
            </tr> 
          </thead>
          <tbody>
            <tr>
              <th >
                <span class="input-group">
                <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
                <input id="subname0" type="text" class="form-control"  placeholder="Navn på Delopgave"/>
              </span>
              </th>
              <th>
                <span class="input-group">
                  <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                  <input id="subtime0" type="number" class="form-control"  placeholder="Estimeret varighed"/>
                </span>
              </th>
            </tr>
          </tbody>  
        </table>
        <button class="btn btn-info" id="save">Gem Projekt</button>
        <button id="addproj" class="btn" >Tilføj Delopgave</button>
      </div>
    </div>





    <div class="w3-container">
        <h2>Gant diagram</h2>
        <p style="font-family:courier;"> Oversigt over projekter og om tid er overholdt</p>

        <div class="w3-sidebar w3-light-grey w3-bar-block" style="width:19%">
            <ol id="gant">
                <h3 class="w3-bar-item">Projektoversigt</h3>
                <a href="#/" class="w3-bar-item w3-button-orange">Oversigt</a>
                
            </ol>
        </div>

        <html>
        <head>
          <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
          <script type="text/javascript">
            google.charts.load('current', {'packages':['gantt']});
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {

              var data = new google.visualization.DataTable();
              data.addColumn('string', 'Task ID');
              data.addColumn('string', 'Navn');
              data.addColumn('string', 'Resource');
              data.addColumn('date', 'Start Date');
              data.addColumn('date', 'End Date');
              data.addColumn('number', 'Duration');
              data.addColumn('number', 'Procent færdige');
              data.addColumn('string', 'Dependencies');

              data.addRows([
                ['jobNames', '<%=jobNames>', 'jobNames',
                new Date(2014, 2, 22), new Date(2014, 5, 20), null, 100, null],
                ['2014Summer', 'dbRefCurrentProj(jobNames[1])', 'summer',
                new Date(2014, 5, 21), new Date(2014, 8, 20), null, 100, null],
                ['2014Autumn', 'dbRefCurrentProj.child("jobNames")', 'autumn',
                new Date(2014, 8, 21), new Date(2014, 11, 20), null, 100, null],
                ['2014Winter', 'Winter 2014', 'winter',
                new Date(2014, 11, 21), new Date(2015, 2, 21), null, 100, null],
                ['2015Spring', 'Spring 2015', 'spring',
                new Date(2015, 2, 22), new Date(2015, 5, 20), null, 50, null],
                ['2015Summer', 'Summer 2015', 'summer',
                new Date(2015, 5, 21), new Date(2015, 8, 20), null, 0, null],
                ['2015Autumn', 'Autumn 2015', 'autumn',
                new Date(2015, 8, 21), new Date(2015, 11, 20), null, 0, null],
                ['2015Winter', 'Winter 2015', 'winter',
                new Date(2015, 11, 21), new Date(2016, 2, 21), null, 0, null],
                ['Football', 'Football Season', 'sports',
                new Date(2014, 8, 4), new Date(2015, 1, 1), null, 100, null],
                ['Baseball', 'Baseball Season', 'sports',
                new Date(2015, 2, 31), new Date(2015, 9, 20), null, 14, null],
                ['Basketball', 'Basketball Season', 'sports',
                new Date(2014, 9, 28), new Date(2015, 5, 20), null, 86, null],
                ['Hockey', 'Hockey Season', 'sports',
                new Date(2014, 9, 8), new Date(2015, 5, 21), null, 89, null]
              ]);

              var options = {
                height: 400,
                gantt: {
                  trackHeight: 30
                }
              };

              var chart = new google.visualization.Gantt(document.getElementById('chart_div'));

              chart.draw(data, options);
            }
          </script>
        </head>
        <body>
          <div id="chart_div"></div>
        </body>
        </html>

    </div>